{"version":3,"sources":["webpack:///webpack/bootstrap d761a308e8ce5bbbd219","webpack:///external \"express\"","webpack:///external \"dotenv\"","webpack:///external \"mongoose\"","webpack:///./server/api/users/models.js","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///external \"bcrypt\"","webpack:///./nuxt.config.js","webpack:///./server/api/index.js","webpack:///external \"body-parser\"","webpack:///external \"nuxt\"","webpack:///./server/api/users/controllers.js","webpack:///./server/api/users/routes.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"regenerator-runtime\"","webpack:///./server/index.js","webpack:///./server/util/filtersensative.js"],"names":["usersSchema","mongoose","Schema","username","type","String","unique","require","email","password","timestamps","usersModel","model","pre","callback","isModified","bcrypt","hash","config","module","exports","css","build","vendor","env","HOST","PORT","URL","API_HOST","API_PORT","API_URL","router","express","Router","use","get","req","res","json","users","process","find","console","log","status","error","post","body","newUser","save","user","findOneAndUpdate","put","delete","signIn","User","findOne","then","hashedPassword","compare","message","matched","filterSensative","token","jwt","sign","SECRET","expiresIn","catch","dotenv","app","bodyParser","urlencoded","extended","Promise","global","connect","DB_URL","dev","nuxt","render","exit","listen","err","Object","keys","toObject","reduce","acc","item"],"mappings":";;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA,oC;;;;;;ACAA,mC;;;;;;ACAA,qC;;;;;;;;;;;;;;;;;ACAA;AACA;;AAEA,IAAMA,cAAc,IAAI,gDAAAC,CAASC,MAAb,CAAoB;AACvCC,WAAU;AACTC,QAAMC,MADG;AAETC,UAAQ,IAFC;AAGTC,WAAS;AAHA,EAD6B;AAMvCC,QAAO;AACNJ,QAAMC,MADA;AAENC,UAAQ,IAFF;AAGNC,WAAS;AAHH,EANgC;AAWvCE,WAAU;AACTL,QAAMC,MADG;AAETC,UAAQ,IAFC;AAGTC,WAAS;AAHA;AAX6B,CAApB,EAgBjB;AACDG,aAAY;AADX,CAhBiB,CAApB;;AAoBA,IAAMC,aAAa,gDAAAV,CAASW,KAAT,CAAe,MAAf,EAAuBZ,WAAvB,CAAnB;;AAGA;AACAA,YAAYa,GAAZ,CAAgB,MAAhB;AAAA,yJAAwB,iBAAeC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAClB,KAAKC,UAAL,CAAgB,UAAhB,CADkB;AAAA;AAAA;AAAA;;AAAA,uCACkBD,UADlB;;AAAA;AAAA;AAAA,aAEJ,8CAAAE,CAAOC,IAAP,CAAY,KAAKR,QAAjB,EAA2B,EAA3B,CAFI;;AAAA;AAEjBQ,UAFiB;;AAGvB,WAAKR,QAAL,GAAgBQ,IAAhB;AACAH;;AAJuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAxB;;AAAA;AAAA;AAAA;AAAA;;AAQA,4CAAeH,UAAf;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,I;;;;;;AC9DA;;;;;;;ACAA,mC;;;;;;ACAA,mBAAAJ,CAAQ,CAAR,EAAkBW,MAAlB;;AAEAC,OAAOC,OAAP,GAAiB;AAChBC,OAAK,CACH,iBADG,EAEH,sBAFG,CADW;AAKfC,SAAO;AACLC,YAAQ,CAAC,OAAD;AADH,GALQ;AAQfC,OAAK;AACJC,UAAM,WADF;AAELC,UAAM,IAFD;AAGLC,SAAK,uBAHA;;AAKLC,cAAU,WALL;AAMLC,cAAU,IANL;AAOLC,aAAS;AAPJ;AARU,CAAjB,C;;;;;;;;;;ACFA;AACA;;AAEA,IAAMC,SAAS,+CAAAC,CAAQC,MAAR,EAAf;;AAEAF,OAAOG,GAAP,CAAW,QAAX,EAAqB,8DAArB;;AAEAH,OAAOI,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC7BA,KAAIC,IAAJ,CAAS;AACRC,SAAUC,QAAQhB,GAAR,CAAYM,OAAtB;AADQ,EAAT;AAGA,CAJD;;AAMA,4CAAeC,MAAf,C;;;;;;ACbA,wC;;;;;;ACAA,iC;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACO,IAAMQ,QAAQ;AACdJ,IADc;AAAA,2KACVC,GADU,EACLC,GADK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAGA,wDAAA1B,CAAW8B,IAAX,CAAgB,EAAhB,CAHA;;AAAA;AAGdF,aAHc;;AAIlBF,WAAIC,IAAJ,CAASC,MAAT;AAJkB;AAAA;;AAAA;AAAA;AAAA;;AAMlBG,eAAQC,GAAR;AACAN,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB,EAAEO,OAAO,kCAAT,EAArB;;AAPkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAUdC,KAVc;AAAA,6KAUTV,GAVS,EAUJC,GAVI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAalBK,eAAQC,GAAR,CAAYP,IAAIW,IAAhB;AAbkB;AAAA,cAcD,8CAAA/B,CAAOC,IAAP,CAAYR,QAAZ,EAAsB,EAAtB,CAdC;;AAAA;AAcdQ,WAdc;AAgBd+B,cAhBc,GAgBJ,IAAI,wDAAJ,CAAe,EAAE7C,kBAAF,EAAYK,YAAZ,EAAmBC,UAAUQ,IAA7B,EAAf,CAhBI;AAAA;AAAA,cAiBD+B,QAAQC,IAAR,EAjBC;;AAAA;AAiBdC,WAjBc;;AAkBlBb,WAAIC,IAAJ,CAASY,IAAT;AAlBkB;AAAA;;AAAA;AAAA;AAAA;;AAoBlBR,eAAQC,GAAR;AACAN,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB,EAAEO,OAAO,kCAAT,EAArB;;AArBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAd;;AA0BA,IAAM1C,WAAW;AACjBgC,IADiB;AAAA,6KACbC,GADa,EACRC,GADQ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGjBlC,gBAHiB,GAGNiC,IAAIW,IAAJ,CAAS5C,QAHH;AAAA;AAAA,cAIJ,wDAAAQ,CAAW8B,IAAX,CAAgB,EAAEtC,mBAAF,EAAhB,CAJI;;AAAA;AAIjB+C,WAJiB;;AAKrBb,WAAIC,IAAJ,CAASY,IAAT;AALqB;AAAA;;AAAA;AAAA;AAAA;;AAOrBR,eAAQC,GAAR;AACAN,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB,EAAEO,OAAO,kCAAT,EAArB;;AARqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAWjBC,KAXiB;AAAA,6KAWZV,GAXY,EAWPC,GAXO;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAaKD,IAAIW,IAbT,EAaf5C,UAbe,aAafA,QAbe,EAaLK,MAbK,aAaLA,KAbK;AAAA;AAAA,cAcJ,wDAAAG,CAAWwC,gBAAX,CAA4B,EAAEhD,oBAAF,EAA5B,EAA0C,EAAEA,oBAAF,EAAYK,aAAZ,EAA1C,CAdI;;AAAA;AAcjB0C,WAdiB;;AAerBb,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqBY,IAArB;AAfqB;AAAA;;AAAA;AAAA;AAAA;;AAiBrBR,eAAQC,GAAR;AACAN,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB,EAAEO,OAAO,kCAAT,EAArB;;AAlBqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAqBjBO,IArBiB;AAAA,6KAqBbhB,GArBa,EAqBRC,GArBQ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAuBKD,IAAIW,IAvBT,EAuBf5C,UAvBe,cAuBfA,QAvBe,EAuBLK,OAvBK,cAuBLA,KAvBK;AAAA;AAAA,cAwBJ,wDAAAG,CAAWwC,gBAAX,CAA4B,EAAEhD,oBAAF,EAA5B,EAA0C,EAAEA,oBAAF,EAAYK,cAAZ,EAA1C,CAxBI;;AAAA;AAwBjB0C,WAxBiB;;AAyBrBb,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqBY,IAArB;AAzBqB;AAAA;;AAAA;AAAA;AAAA;;AA2BrBR,eAAQC,GAAR;AACAN,WAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB,EAAEO,OAAO,kCAAT,EAArB;;AA5BqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA+BjBQ,OA/BiB;AAAA,6KA+BVjB,GA/BU,EA+BLC,GA/BK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAjB;;AAoCA,IAAMiB,SAAS;AACfR,KADe;AAAA,6KACVV,GADU,EACLC,GADK;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBAESD,IAAIW,IAFb,EAEd5C,QAFc,cAEdA,QAFc,EAEJM,QAFI,cAEJA,QAFI;;AAGpB8C,YAAKC,OAAL,CAAa,EAAErD,kBAAF,EAAb,EAA2BsD,IAA3B,CAAgC,gBAAQ;AACvC;AACA,YAAIC,iBAAiBR,KAAKzC,QAA1B;AACAO,QAAA,8CAAAA,CAAO2C,OAAP,CAAelD,QAAf,EAAyBiD,cAAzB,EAAyCD,IAAzC,CAA8C,mBAAW;AACtD,aAAI,CAACP,IAAL,EAAW;AACZb,cAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB;AACpBsB,oBAAS;AADW,WAArB;AAGA,UAJC,MAIK,IAAI,CAACC,OAAL,EAAc;AACpBxB,cAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB;AACpBsB,oBAAS;AADW,WAArB;AAGA,UAJM,MAIA;AACNV,iBAAO,qGAAAY,CAAgBZ,IAAhB,CAAP;AACA,cAAIa,QAAQ,oDAAAC,CAAIC,IAAJ,CAASf,IAAT,EAAeV,QAAQhB,GAAR,CAAY0C,MAA3B,EAAmC;AAC9CC,sBAAW,KAAK,EAAL,GAAU,EAAV,GAAe,EADoB,CACjB;AADiB,WAAnC,CAAZ;AAGA9B,cAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB;AACpBsB,oBAAS,mBADW;AAEpBG,uBAFoB;AAGpBb;AAHoB,WAArB;AAKA;AACD,SApBD,EAoBGkB,KApBH,CAoBS,iBAAS;AACjB1B,iBAAQC,GAAR,CAAYE,KAAZ;AACAR,aAAIO,MAAJ,CAAW,GAAX,EAAgBN,IAAhB,CAAqB;AACpBO;AADoB,UAArB;AAGA,SAzBD;AA0BA,QA7BD;;AAHoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAf;;AAoCP;AACA;;AAEA;AACA,I;;;;;;;;;;;AC1GA;AACA;AACA;;AAEA,IAAMd,SAAS,+CAAAC,CAAQC,MAAR,EAAf;;AAEAF,OAAOI,GAAP,CAAW,GAAX,EAAgB,2DAAAI,CAAMJ,GAAtB;AACAJ,OAAOe,IAAP,CAAY,GAAZ,EAAiB,2DAAAP,CAAMO,IAAvB;;AAGAf,OAAOI,GAAP,CAAW,QAAX,EAAqB,8DAAAhC,CAASgC,GAA9B;AACAJ,OAAOe,IAAP,CAAY,QAAZ,EAAsB,8DAAA3C,CAAS2C,IAA/B;AACAf,OAAOqB,GAAP,CAAW,QAAX,EAAqB,8DAAAjD,CAASiD,GAA9B;AACArB,OAAOsB,MAAP,CAAc,QAAd,EAAwB,8DAAAlD,CAASkD,MAAjC;;AAEAtB,OAAOe,IAAP,CAAY,SAAZ,EAAuB,4DAAAQ,CAAOR,IAA9B;;AAEA,4CAAef,MAAf,C;;;;;;;ACjBA,yC;;;;;;ACAA,gD;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA,8CAAAsC,CAAOnD,MAAP;AACA;AACA;AACA;AACA;;AAEA,IAAMoD,MAAM,+CAAAtC,EAAZ;;AAEAsC,IAAIpC,GAAJ,CAAQ,mDAAAqC,CAAWC,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAH,IAAIpC,GAAJ,CAAQ,mDAAAqC,CAAWjC,IAAX,EAAR;;AAEAgC,IAAIpC,GAAJ,CAAQ,MAAR,EAAgB,2DAAhB;;AAEA;AACA,gDAAAjC,CAASyE,OAAT,GAAmBC,OAAOD,OAA1B;AACA,gDAAAzE,CAAS2E,OAAT,CAAiBpC,QAAQhB,GAAR,CAAYqD,MAA7B;;AAEA;AACA,IAAI3D,SAAS,mBAAAX,CAAQ,CAAR,CAAb;AACAW,OAAO4D,GAAP,GAAa,EAAE,kBAAyB,YAA3B,CAAb;;AAEA;AACA,IAAMC,OAAO,IAAI,4CAAJ,CAAS7D,MAAT,CAAb;AACAoD,IAAIpC,GAAJ,CAAQ6C,KAAKC,MAAb;;AAEA;AACA,IAAI9D,OAAO4D,GAAX,EAAgB;AACdC,OAAKzD,KAAL,GACC8C,KADD,CACO,UAACvB,KAAD,EAAW;AAChBH,YAAQG,KAAR,CAAcA,KAAd,EADgB,CACK;AACrBL,YAAQyC,IAAR,CAAa,CAAb;AACD,GAJD;AAKD;;AAGDX,IAAIY,MAAJ,CAAW1C,QAAQhB,GAAR,CAAYK,QAAvB,EAAiCW,QAAQhB,GAAR,CAAYI,QAA7C,EAAuD,eAAO;AAC7D,MAAIuD,GAAJ,EAAS,MAAMA,GAAN;AACTzC,UAAQC,GAAR,2CAA0CH,QAAQhB,GAAR,CAAYI,QAAtD,SAAkEY,QAAQhB,GAAR,CAAYK,QAA9E;AACA,CAHD,E;;;;;;;;ACrCO,SAASiC,eAAT,CAAyBZ,IAAzB,EAA+B;AACrC,KAAIF,UAAUoC,OAAOC,IAAP,CAAYnC,KAAKoC,QAAL,EAAZ,EAA6BC,MAA7B,CAAoC,UAACC,GAAD,EAAMC,IAAN,EAAe;AAC/D,MAAIA,SAAS,UAAT,IAAuBA,SAAS,WAAhC,IAA+CA,SAAS,WAA5D,EAAyE;AACzED,OAAIC,IAAJ,IAAYvC,KAAKuC,IAAL,CAAZ;AACA;AACD,SAAOD,GAAP;AACA,EALa,EAKX,EALW,CAAd;AAMA,QAAOxC,OAAP;AACA,C","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d761a308e8ce5bbbd219","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 2\n// module chunks = 0","import mongoose from 'mongoose'\nimport bcrypt from 'bcrypt'\n\nconst usersSchema = new mongoose.Schema({\n\tusername: {\n\t\ttype: String,\n\t\tunique: true,\n\t\trequire: true\n\t},\n\temail: {\n\t\ttype: String,\n\t\tunique: true,\n\t\trequire: true\n\t},\n\tpassword: {\n\t\ttype: String,\n\t\tunique: true,\n\t\trequire: true\n\t}\n}, {\n  timestamps: true\n})\n\nconst usersModel = mongoose.model('User', usersSchema)\n\n\n// hash the password if it is ever saved to the DB.\nusersSchema.pre('save', async function(callback) {\n\tif (!this.isModified('password')) return callback()\n\tconst hash = await bcrypt.hash(this.password, 10)\n\tthis.password = hash\n\tcallback()\n})\n\n\nexport default usersModel\n\n\n// module.exports = {\n// \tusers: [\n// \t\t{\n// \t\t\tusername: 'rlindskog',\n// \t\t\temail: 'r.lindskog17@gmail.com',\n// \t\t\tadmin: true,\n// \t\t\tverified: true,\n// \t\t\thref: `${process.env.API_URL}/rlindskog`\n// \t\t},\n// \t\t{\n// \t\t\tusername: 'john',\n// \t\t\temail: 'john@gmail.com',\n// \t\t\tadmin: false,\n// \t\t\tverified: false,\n// \t\t\thref: `${process.env.API_URL}/john`\n// \t\t},\n// \t\t{\n// \t\t\tusername: 'jaccob',\n// \t\t\temail: 'jaccob@gmail.com',\n// \t\t\tadmin: false,\n// \t\t\tverified: true,\n// \t\t\thref: `${process.env.API_URL}/jaccob`\n// \t\t},\n// \t]\n// }\n\n\n// WEBPACK FOOTER //\n// ./server/api/users/models.js","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/babel-runtime/regenerator/index.js\n// module id = 4\n// module chunks = 0","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 5\n// module chunks = 0","require('dotenv').config()\n\nmodule.exports = {\n\tcss: [\n  \t'assets/main.css',\n  \t'assets/normalize.css'\n  ],\n  build: {\n    vendor: ['axios']\n  },\n  env: {\n  \tHOST: '127.0.0.1',\n\t\tPORT: 3000,\n\t\tURL: 'http://127.0.0.1:3000',\n\n\t\tAPI_HOST: '127.0.0.1',\n\t\tAPI_PORT: 3000,\n\t\tAPI_URL: 'http://127.0.0.1:3000/api'\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","import express from 'express'\nimport usersRoutes from './users/routes'\n\nconst router = express.Router()\n\nrouter.use('/users', usersRoutes)\n\nrouter.get('/', (req, res) => {\n\tres.json({\n\t\tusers: `${process.env.API_URL}/users`\n\t})\n})\n\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 9\n// module chunks = 0","import usersModel from './models'\nimport jwt from 'jsonwebtoken'\nimport bcrypt from 'bcrypt'\nimport { filterSensative } from '../../util/filtersensative'\nexport const users = {\n\tasync get(req, res) {\n\t\ttry {\n\t\t\tlet users = await usersModel.find({})\n\t\t\tres.json(users)\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tres.status(500).json({ error: 'Error 500. Internal server error' })\n\t\t}\n\t},\n\tasync post(req, res) {\n\t\ttry {\n\n\t\t\tconsole.log(req.body)\n\t\t\tlet hash = await bcrypt.hash(password, 10)\n\n\t\t\tlet newUser = new usersModel({ username, email, password: hash })\n\t\t\tlet user = await newUser.save()\n\t\t\tres.json(user)\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tres.status(500).json({ error: 'Error 500. Internal server error' })\n\t\t}\n\t}\n}\n\nexport const username = {\n\tasync get(req, res) {\n\t\ttry {\n\t\t\tlet username = req.body.username\n\t\t\tlet user = await usersModel.find({ username })\n\t\t\tres.json(user)\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tres.status(500).json({ error: 'Error 500. Internal server error' })\n\t\t}\n\t},\n\tasync post(req, res) {\n\t\ttry {\n\t\t\tlet { username, email } = req.body\n\t\t\tlet user = await usersModel.findOneAndUpdate({ username }, { username, email })\n\t\t\tres.status(200).json(user)\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tres.status(500).json({ error: 'Error 500. Internal server error' })\n\t\t}\n\t},\n\tasync put(req, res) {\n\t\ttry {\n\t\t\tlet { username, email } = req.body\n\t\t\tlet user = await usersModel.findOneAndUpdate({ username }, { username, email })\n\t\t\tres.status(201).json(user)\n\t\t} catch (error) {\n\t\t\tconsole.log(error)\n\t\t\tres.status(500).json({ error: 'Error 500. Internal server error' })\n\t\t}\n\t},\n\tasync delete(req, res) {\n\n\t},\n}\n\nexport const signIn = {\n\tasync post(req, res) {\n\t\tlet { username, password } = req.body\n\t\tUser.findOne({ username }).then(user => {\n\t\t\t// console.log(user)\n\t\t\tlet hashedPassword = user.password\n\t\t\tbcrypt.compare(password, hashedPassword).then(matched => {\n\t\t    if (!user) {\n\t\t\t\t\tres.status(404).json({\n\t\t\t\t\t\tmessage: 'Authentication failed, can\\'t find user'\n\t\t\t\t\t})\n\t\t\t\t} else if (!matched) {\n\t\t\t\t\tres.status(404).json({\n\t\t\t\t\t\tmessage: 'Authntication failed. Wrong password'\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\tuser = filterSensative(user)\n\t\t\t\t\tlet token = jwt.sign(user, process.env.SECRET, {\n\t\t\t\t\t\texpiresIn: 60 * 60 * 24 * 30 // 30 days \n\t\t\t\t\t})\n\t\t\t\t\tres.status(200).json({\n\t\t\t\t\t\tmessage: 'Enjoy your token!',\n\t\t\t\t\t\ttoken,\n\t\t\t\t\t\tuser\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.log(error)\n\t\t\t\tres.status(500).json({\n\t\t\t\t\terror\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t}\n}\n\n// export singOut = {\n// \tasync post(req, res) {\n\n// \t}\n// }\n\n\n// WEBPACK FOOTER //\n// ./server/api/users/controllers.js","import express from 'express'\nimport usersModels from './models'\nimport { users, username, signIn } from './controllers'\n\nconst router = express.Router()\n\nrouter.get('/', users.get)\nrouter.post('/', users.post)\n\n\nrouter.get('/:user', username.get)\nrouter.post('/:user', username.post)\nrouter.put('/:user', username.put)\nrouter.delete('/:user', username.delete)\n\nrouter.post('/signin', signIn.post)\n\nexport default router\n\n\n// WEBPACK FOOTER //\n// ./server/api/users/routes.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 14\n// module chunks = 0","import bodyParser from 'body-parser'\nimport dotenv from 'dotenv'\ndotenv.config()\nimport express from 'express'\nimport api from './api/index'\nimport mongoose from 'mongoose'\nimport Nuxt from 'nuxt'\n\nconst app = express()\n\napp.use(bodyParser.urlencoded({ extended: false }))\napp.use(bodyParser.json())\n\napp.use('/api', api)\n\n// Connect to DB\nmongoose.Promise = global.Promise\nmongoose.connect(process.env.DB_URL)\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js')\nconfig.dev = !(process.env.NODE_ENV === 'production')\n\n// Init Nuxt.js\nconst nuxt = new Nuxt(config)\napp.use(nuxt.render)\n\n// Build only in dev mode\nif (config.dev) {\n  nuxt.build()\n  .catch((error) => {\n    console.error(error) // eslint-disable-line no-console\n    process.exit(1)\n  })\n}\n\n\napp.listen(process.env.API_PORT, process.env.API_HOST, err => {\n\tif (err) throw err\n\tconsole.log(`🌎 API listening at http://${process.env.API_HOST}:${process.env.API_PORT}`)\n})\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","export function filterSensative(user) {\n\tlet newUser = Object.keys(user.toObject()).reduce((acc, item) => {\n\t  if (item !== 'password' && item !== 'createdAt' && item !== 'updatedAt') {\n\t\t\tacc[item] = user[item]\n\t\t}\n\t\treturn acc\n\t}, {})\n\treturn newUser\n}\n\n\n// WEBPACK FOOTER //\n// ./server/util/filtersensative.js"],"sourceRoot":""}